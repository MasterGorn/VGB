<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Test ZIP - Video Games Battle</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
    <h1>Test de cr√©ation d'archive ZIP avec dossiers</h1>
    <button id="testBtn">Tester la cr√©ation de dossiers</button>
    <div id="result"></div>

    <script>
        document.getElementById('testBtn').addEventListener('click', async function() {
            try {
                console.log('üß™ Test de cr√©ation d\'archive ZIP avec dossiers...');
                
                // Cr√©er une archive ZIP
                const zip = new JSZip();
                
                // Cr√©er des dossiers
                zip.folder('nintendo');
                zip.folder('playstation');
                zip.folder('sega');
                zip.folder('xbox');
                
                // Ajouter des fichiers dans les dossiers
                zip.file('nintendo/mario-movement-demo.png', 'fake-mario-data');
                zip.file('nintendo/link-movement-demo.png', 'fake-link-data');
                zip.file('playstation/kratos-movement-demo.png', 'fake-kratos-data');
                zip.file('sega/sonic-movement-demo.png', 'fake-sonic-data');
                zip.file('xbox/master-chief-movement-demo.png', 'fake-master-chief-data');
                
                console.log('üìÅ Fichiers dans l\'archive:');
                Object.keys(zip.files).forEach(filePath => {
                    console.log(`  - ${filePath}`);
                });
                
                // G√©n√©rer l'archive
                const content = await zip.generateAsync({
                    type: "blob",
                    compression: "DEFLATE"
                });
                
                console.log('Archive g√©n√©r√©e, taille:', content.size, 'bytes');
                
                // T√©l√©charger
                const link = document.createElement('a');
                link.href = URL.createObjectURL(content);
                link.download = 'test-dossiers.zip';
                link.click();
                
                document.getElementById('result').innerHTML = `
                    <h2>‚úÖ Test r√©ussi !</h2>
                    <p>Archive t√©l√©charg√©e avec ${Object.keys(zip.files).length} fichiers</p>
                    <p>V√©rifiez que l'archive contient bien les dossiers :</p>
                    <ul>
                        <li>nintendo/</li>
                        <li>playstation/</li>
                        <li>sega/</li>
                        <li>xbox/</li>
                    </ul>
                `;
                
            } catch (error) {
                console.error('Erreur:', error);
                document.getElementById('result').innerHTML = `<h2>‚ùå Erreur: ${error.message}</h2>`;
            }
        });
    </script>
</body>
</html>
